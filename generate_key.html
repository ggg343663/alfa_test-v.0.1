<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Register QR - DTC: Magic Chain System</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f5f6fa;
      max-width: 700px;
      margin: 0 auto;
      padding: 1.1em 0.4em 4em 0.4em;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #26314f;
      margin-bottom: 0.7em;
      font-size: 1.35em;
      letter-spacing: 0.03em;
    }
    .form-group {
      margin-bottom: 1.1em;
    }
    label {
      font-weight: bold;
      margin-bottom: 0.21em;
      display: block;
      color: #222c36;
      font-size: 1em;
    }
    textarea,
    input[type="text"] {
      width: 100%;
      padding: 10px 11px;
      font-size: 1em;
      border: 2px solid #cfd8dc;
      border-radius: 9px;
      box-sizing: border-box;
      background: #fff;
      margin-bottom: 0.2em;
      transition: border 0.12s;
      resize: none;
    }
    textarea:focus,
    input[type="text"]:focus {
      border-color: #1976d2;
      outline: none;
      background: #fafdff;
    }
    textarea[readonly], input[readonly] {
      background: #f4f5f8;
      color: #7e8a99;
      border-style: dashed;
    }
    .input-row {
      display: flex;
      align-items: center;
      gap: 0.5em;
    }
    .copy-btn {
      background: #1976d2;
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 8px 15px;
      font-size: 1em;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.13s;
      margin-left: 2px;
      min-width: 55px;
    }
    .copy-btn:active { filter: brightness(0.95);}
    .copy-status {
      margin-left: 7px;
      font-size: 0.95em;
      color: #43a047;
      opacity: 0;
      font-weight: bold;
      transition: opacity 0.22s;
      min-width: 52px;
      display: inline-block;
    }
    .copy-status.visible { opacity: 1;}
    .btn {
      width: 100%;
      font-size: 1.09em;
      padding: 0.78em 0;
      margin-bottom: 0.66em;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      cursor: pointer;
      transition: filter 0.13s;
      letter-spacing: 0.01em;
      box-shadow: 0 1px 6px rgba(0,0,0,0.09);
    }
    .btn-register { background: #388e3c; color: #fff;}
    .btn-clear { background: #ffd600; color: #444;}
    .btn-back { background: #9e9e9e; color: #fff;}
    .btn:active { filter: brightness(0.94);}
    .footer-note {
      text-align: center;
      color: #90a4ae;
      font-size: 0.93em;
      margin-top: 2em;
    }
    @media (max-width: 600px) {
      body { padding: 0.5em 0.04em 3em 0.04em; }
      h1 { font-size: 1.09em; }
      .btn { font-size: 1em; }
      textarea, input[type="text"] { font-size: 0.99em; }
      .copy-btn { padding: 7px 10px; min-width: 43px; }
    }
  </style>
</head>
<body>
  <h1>Register QR</h1>
  <form id="registerForm" autocomplete="off">
    <div class="form-group">
      <label for="publicKey">Public Key:</label>
      <div class="input-row">
        <textarea
          id="publicKey"
          rows="2"
          placeholder="Public Key will be auto-filled"
          autocomplete="off"
        ></textarea>
        <button type="button" class="copy-btn" id="copyPubKeyBtn">Copy</button>
        <span class="copy-status" id="copyPubKeyStatus"></span>
      </div>
    </div>
    <div class="form-group">
      <label for="qrHash">QR Hash:</label>
      <div class="input-row">
        <textarea
          id="qrHash"
          rows="1"
          placeholder="QR Hash will be auto-filled"
          autocomplete="off"
        ></textarea>
        <button type="button" class="copy-btn" id="copyHashBtn">Copy</button>
        <span class="copy-status" id="copyStatus"></span>
      </div>
    </div>
    <div class="form-group">
      <label for="ownerName">Owner Name (optional):</label>
      <input
        type="text"
        id="ownerName"
        placeholder="Enter name (optional)"
        autocomplete="off"
      />
    </div>
    <button type="submit" class="btn btn-register">Register</button>
    <button type="button" class="btn btn-clear" id="clearBtn">Clear</button>
    <button type="button" class="btn btn-back" onclick="history.back()">Back</button>
  </form>
  <p class="footer-note">
    Public Key and QR Hash will be auto-filled if stored locally.<br>
    If no backend, data is saved only in this browser (Demo mode).
  </p>
  <script>
    // Autofill demo (simulate data)
    document.getElementById('publicKey').value =
      localStorage.getItem('dtc_pubkey') || '';
    document.getElementById('qrHash').value =
      localStorage.getItem('dtc_qrhash') || '';

    // Copy Public Key
    document.getElementById('copyPubKeyBtn').onclick = function() {
      let pub = document.getElementById('publicKey').value;
      let st = document.getElementById('copyPubKeyStatus');
      if(pub){
        navigator.clipboard.writeText(pub);
        st.textContent = '✓ Copied!';
        st.classList.add('visible');
        setTimeout(()=>st.classList.remove('visible'), 1300);
      }
    };

    // Copy QR Hash
    document.getElementById('copyHashBtn').onclick = function() {
      let qr = document.getElementById('qrHash').value;
      let st = document.getElementById('copyStatus');
      if(qr){
        navigator.clipboard.writeText(qr);
        st.textContent = '✓ Copied!';
        st.classList.add('visible');
        setTimeout(()=>st.classList.remove('visible'), 1300);
      }
    };

    // Register button (demo - prevent actual submission)
    document.getElementById('registerForm').onsubmit = function(e) {
      e.preventDefault();
      // highlight register btn as feedback
      document.querySelector('.btn-register').style.background = "#228B22";
      setTimeout(()=>document.querySelector('.btn-register').style.background="#388e3c", 650);
      // ...handle register logic here...
    };

    // Clear button
    document.getElementById('clearBtn').onclick = function() {
      document.getElementById('publicKey').value = '';
      document.getElementById('qrHash').value = '';
      document.getElementById('ownerName').value = '';
    };
  </script>
</body>
</html>
