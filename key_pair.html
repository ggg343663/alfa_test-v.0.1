<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>à¸ªà¸£à¹‰à¸²à¸‡ Address à¸ˆà¸²à¸à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 2em auto;
      padding: 1em;
      background-color: #f9f9f9;
      border-radius: 8px;
    }
    input, textarea {
      width: 100%;
      padding: 0.5em;
      font-size: 1em;
      margin-top: 0.3em;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    input.invalid { border-color: red; }
    input.valid { border-color: green; }
    button {
      margin-top: 1em;
      padding: 0.7em 1.2em;
      font-size: 1em;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background-color: #45a049; }
    .toggle-password {
      position: absolute;
      right: 10px;
      top: 36px;
      cursor: pointer;
      font-size: 0.9em;
      color: #555;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 1em;
      position: relative;
    }
    .status {
      font-size: 0.9em;
      margin-top: 0.3em;
      color: green;
      display: none;
    }
  </style>
</head>
<body>
  <h2>ğŸ” à¸ªà¸£à¹‰à¸²à¸‡ Address (Web3-style) à¸ˆà¸²à¸à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™</h2>

  <label>à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ (6-12 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£):
    <input type="password" id="privateKey1" maxlength="12" minlength="6" />
    <span class="toggle-password" data-target="privateKey1">à¹à¸ªà¸”à¸‡</span>
  </label>

  <label>à¸¢à¸·à¸™à¸¢à¸±à¸™à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™:
    <input type="password" id="privateKey2" maxlength="12" minlength="6" />
    <span class="toggle-password" data-target="privateKey2">à¹à¸ªà¸”à¸‡</span>
  </label>

  <button onclick="generateAddress()">ğŸš€ à¸ªà¸£à¹‰à¸²à¸‡ Address</button>

  <h3>ğŸ”‘ Private Key (SHA-256):</h3>
  <textarea id="fullHash" rows="2" readonly></textarea>

  <h3>ğŸ“® Address (à¹ƒà¸Šà¹‰ 40 à¸«à¸¥à¸±à¸à¸—à¹‰à¸²à¸¢):</h3>
  <textarea id="addressOutput" rows="2" readonly></textarea>

  <button onclick="copyAddress()">ğŸ“‹ à¸„à¸±à¸”à¸¥à¸­à¸ Address</button>
  <div id="copyStatus" class="status">âœ… à¸„à¸±à¸”à¸¥à¸­à¸à¸ªà¸³à¹€à¸£à¹‡à¸ˆ!</div>

  <p><a href="index.html">â† à¸à¸¥à¸±à¸šà¸«à¸™à¹‰à¸²à¸«à¸¥à¸±à¸</a></p>

  <script>
    const toggleSpans = document.querySelectorAll(".toggle-password");

    toggleSpans.forEach(span => {
      span.addEventListener("click", () => {
        const id = span.getAttribute("data-target");
        const input = document.getElementById(id);
        if (input.type === "password") {
          input.type = "text";
          span.textContent = "à¸‹à¹ˆà¸­à¸™";
        } else {
          input.type = "password";
          span.textContent = "à¹à¸ªà¸”à¸‡";
        }
      });
    });

    async function sha256Hex(str) {
      const buffer = new TextEncoder().encode(str);
      const hash = await crypto.subtle.digest("SHA-256", buffer);
      return [...new Uint8Array(hash)].map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function generateAddress() {
      const pw1 = document.getElementById("privateKey1").value.trim();
      const pw2 = document.getElementById("privateKey2").value.trim();
      const fullHashEl = document.getElementById("fullHash");
      const addressEl = document.getElementById("addressOutput");
      const status = document.getElementById("copyStatus");

      if (pw1.length < 6 || pw1.length > 12) {
        alert("âš  à¸à¸£à¸¸à¸“à¸²à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™ 6-12 à¸•à¸±à¸§à¸­à¸±à¸à¸©à¸£");
        return;
      }
      if (pw1 !== pw2) {
        alert("âš  à¸£à¸«à¸±à¸ªà¸œà¹ˆà¸²à¸™à¹„à¸¡à¹ˆà¸•à¸£à¸‡à¸à¸±à¸™");
        return;
      }

      const hash = await sha256Hex(pw1);
      const address = "0x" + hash.slice(-40);

      fullHashEl.value = hash;
      addressEl.value = address;
      status.style.display = "none";
      alert("âœ… Address à¸ªà¸£à¹‰à¸²à¸‡à¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢ à¸à¸£à¸¸à¸“à¸²à¸ªà¸³à¸£à¸­à¸‡à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸§à¹‰à¹ƒà¸«à¹‰à¸›à¸¥à¸­à¸”à¸ à¸±à¸¢");
    }

    function copyAddress() {
      const addressEl = document.getElementById("addressOutput");
      if (!addressEl.value) {
        alert("âš  à¸à¸£à¸¸à¸“à¸²à¸ªà¸£à¹‰à¸²à¸‡ Address à¸à¹ˆà¸­à¸™");
        return;
      }
      addressEl.select();
      addressEl.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(addressEl.value).then(() => {
        const status = document.getElementById("copyStatus");
        status.style.display = "block";
        setTimeout(() => status.style.display = "none", 2000);
      });
    }
  </script>
</body>
</html>
