<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏™‡∏£‡πâ‡∏≤‡∏á Address ‡∏à‡∏≤‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 2em auto;
      padding: 1em;
      background-color: #f9f9f9;
      border-radius: 8px;
      position: relative;
    }
    .back-btn {
      position: fixed;
      top: 18px;
      left: 16px;
      background: #eee;
      color: #222;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1em;
      padding: 0.4em 1.1em;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      transition: background 0.2s;
    }
    .back-btn:hover {
      background: #d6f5d6;
      color: #1a7f3c;
    }
    @media (max-width: 600px) {
      .back-btn { top: 10px; left: 8px; font-size: 0.97em; padding: 0.34em 0.9em;}
    }
    input, textarea {
      width: 100%;
      padding: 0.5em;
      font-size: 1em;
      margin-top: 0.3em;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    input.invalid { border-color: red; }
    input.valid { border-color: green; }
    button:not(.back-btn) {
      margin-top: 1em;
      padding: 0.7em 1.2em;
      font-size: 1em;
      background-color: #4caf50;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:not(.back-btn):hover { background-color: #45a049; }
    .toggle-password {
      position: absolute;
      right: 10px;
      top: 36px;
      cursor: pointer;
      font-size: 0.9em;
      color: #555;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 1em;
      position: relative;
    }
    .status {
      font-size: 0.9em;
      margin-top: 0.3em;
      color: green;
      display: none;
    }
  </style>
</head>
<body>
  <button class="back-btn" onclick="history.back()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
  <h2 style="margin-top:1.5em;">üîê ‡∏™‡∏£‡πâ‡∏≤‡∏á Address (Web3-style) ‡∏à‡∏≤‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</h2>

  <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (6-12 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£):
    <input type="password" id="privateKey1" maxlength="12" minlength="6" />
    <span class="toggle-password" data-target="privateKey1">‡πÅ‡∏™‡∏î‡∏á</span>
  </label>

  <label>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô:
    <input type="password" id="privateKey2" maxlength="12" minlength="6" />
    <span class="toggle-password" data-target="privateKey2">‡πÅ‡∏™‡∏î‡∏á</span>
  </label>

  <button onclick="generateAddress()">üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á Address</button>

  <h3>üîë Private Key (SHA-256):</h3>
  <textarea id="fullHash" rows="2" readonly></textarea>

  <h3>üìÆ Address (‡πÉ‡∏ä‡πâ 40 ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡πâ‡∏≤‡∏¢):</h3>
  <textarea id="addressOutput" rows="2" readonly></textarea>

  <button onclick="copyAddress()">üìã ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å Address</button>
  <div id="copyStatus" class="status">‚úÖ ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</div>

  <script>
    const toggleSpans = document.querySelectorAll(".toggle-password");

    toggleSpans.forEach(span => {
      span.addEventListener("click", () => {
        const id = span.getAttribute("data-target");
        const input = document.getElementById(id);
        if (input.type === "password") {
          input.type = "text";
          span.textContent = "‡∏ã‡πà‡∏≠‡∏ô";
        } else {
          input.type = "password";
          span.textContent = "‡πÅ‡∏™‡∏î‡∏á";
        }
      });
    });

    async function sha256Hex(str) {
      const buffer = new TextEncoder().encode(str);
      const hash = await crypto.subtle.digest("SHA-256", buffer);
      return [...new Uint8Array(hash)].map(b => b.toString(16).padStart(2, '0')).join('');
    }

    async function generateAddress() {
      const pw1 = document.getElementById("privateKey1").value.trim();
      const pw2 = document.getElementById("privateKey2").value.trim();
      const fullHashEl = document.getElementById("fullHash");
      const addressEl = document.getElementById("addressOutput");
      const status = document.getElementById("copyStatus");

      if (pw1.length < 6 || pw1.length > 12) {
        alert("‚ö† ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô 6-12 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£");
        return;
      }
      if (pw1 !== pw2) {
        alert("‚ö† ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
        return;
      }

      const hash = await sha256Hex(pw1);
      const address = "0x" + hash.slice(-40);

      fullHashEl.value = hash;
      addressEl.value = address;
      status.style.display = "none";
      alert("‚úÖ Address ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢");
    }

    function copyAddress() {
      const addressEl = document.getElementById("addressOutput");
      if (!addressEl.value) {
        alert("‚ö† ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á Address ‡∏Å‡πà‡∏≠‡∏ô");
        return;
      }
      addressEl.select();
      addressEl.setSelectionRange(0, 99999);
      navigator.clipboard.writeText(addressEl.value).then(() => {
        const status = document.getElementById("copyStatus");
        status.style.display = "block";
        setTimeout(() => status.style.display = "none", 2000);
      });
    }
  </script>
</body>
</html>
