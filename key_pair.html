<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>สร้าง Address จากรหัสผ่าน</title>
</head>
<body>
  <h1>สร้าง Address (Web3-style) จากรหัสผ่าน</h1>
  <label>รหัสผ่าน (6-12 ตัวอักษร):</label><br />
  <input type="password" id="privateKey1" maxlength="12" minlength="6" /><br /><br />
  <label>ยืนยันรหัสผ่าน:</label><br />
  <input type="password" id="privateKey2" maxlength="12" minlength="6" /><br /><br />
  <button onclick="generateAddress()">สร้าง Address</button>
  <h3>Address:</h3>
  <textarea id="addressOutput" rows="2" cols="50" readonly></textarea>

  <script>
    async function sha256Hex(str) {
      const buffer = new TextEncoder().encode(str);
      const hashBuffer = await crypto.subtle.digest("SHA-256", buffer);
      return Array.from(new Uint8Array(hashBuffer))
        .map((b) => b.toString(16).padStart(2, "0"))
        .join("");
    }

    async function generateAddress() {
      const pw1 = document.getElementById("privateKey1").value.trim();
      const pw2 = document.getElementById("privateKey2").value.trim();
      if (pw1.length < 6 || pw1.length > 12) {
        alert("กรุณากรอกรหัสผ่าน 6-12 ตัวอักษร");
        return;
      }
      if (pw1 !== pw2) {
        alert("รหัสผ่านไม่ตรงกัน กรุณากรอกใหม่");
        return;
      }
      const fullHash = await sha256Hex(pw1);
      const address = "0x" + fullHash.slice(-40);
      document.getElementById("addressOutput").value = address;
    }
  </script>
</body>
</html>
